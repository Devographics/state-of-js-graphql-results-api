#import "./experience.graphql"
#import "./usage.graphql"

"""
Matrices (Heatmaps)
"""

type MatrixRange @cacheControl(maxAge: 600) {
    range: String
    count: Int
    percentage: Float
}

type MatrixBucket @cacheControl(maxAge: 600) {
    id: String
    entity: Entity
    total: Int
    average: Float
    ranges: [MatrixRange] @cacheControl(maxAge: 600)
}

type YearMatrix @cacheControl(maxAge: 600) {
    year: Int
    buckets: [MatrixBucket] @cacheControl(maxAge: 600)
}

"""
Sub-aggregations for tools for a given experience response,
for example, salary breakdown for users who have used React
and would use it again.
"""
type ToolsMatrix @cacheControl(maxAge: 600) {
    year(year: Int!): YearMatrix
    experience: ExperienceID
}

type ToolsMatrices @cacheControl(maxAge: 600) {
    workExperience(experience: ExperienceID!): ToolsMatrix
    salary(experience: ExperienceID!): ToolsMatrix
    companySize(experience: ExperienceID!): ToolsMatrix
}

#"""
#Sub-aggregations for features for a given usage response,
#for example, salary breakdown for users who have used flex-box.
#"""
#type FeaturesMatrix @cacheControl(maxAge: 600) {
#    year(year: Int!): YearMatrix
#    experience: UsageID
#}
#
#type FeaturesMatrices @cacheControl(maxAge: 600) {
#    workExperience(usage: UsageID!): FeaturesMatrix
#    salary(usage: UsageID!): FeaturesMatrix
#    companySize(usage: UsageID!): FeaturesMatrix
#}

type Matrices @cacheControl(maxAge: 600) {
    tools(ids: [ToolID]): ToolsMatrices
    # features(ids: [FeatureID]): FeaturesMatrices
}